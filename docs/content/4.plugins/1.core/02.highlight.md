---
title: Syntax Highlighting
description: Plugin for syntax highlighting code blocks using Shiki with multi-theme support.
navigation.icon: i-lucide-code
seo.title: Syntax Highlighting Plugin
---

The `comark/plugins/highlight` plugin provides beautiful syntax highlighting for code blocks using [Shiki](https://shiki.style/). It supports multiple themes, line highlighting, and on-demand language loading for optimal performance.

## Installation

The highlight plugin is built into Comark and uses Shiki as a peer dependency:

::code-group

```bash [npm]
npm install shiki
```

```bash [pnpm]
pnpm add shiki
```

```bash [yarn]
yarn add shiki
```

```bash [bun]
bun add shiki
```

::

## Basic Usage

### With Parse API

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

const content = `
\`\`\`javascript
function hello() {
  console.log("Hello, World!")
}
\`\`\`
`

// Enable syntax highlighting
const result = await parse(content, {
  plugins: [highlight()]
})
```

### With Custom Themes

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

const result = await parse(content, {
  plugins: [
    highlight({
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      }
    })
  ]
})
```

### With Vue

```vue
<script setup>
import { Comark } from 'comark/vue'
import highlight from 'comark/plugins/highlight'

const content = `
\`\`\`javascript
const greeting = "Hello World"
console.log(greeting)
\`\`\`
`

const options = {
  plugins: [
    highlight({
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      }
    })
  ]
}
</script>

<template>
  <Suspense>
    <Comark :options="options">{{ content }}</Comark>
  </Suspense>
</template>
```

### With React

```tsx
import { Comark } from 'comark/react'
import highlight from 'comark/plugins/highlight'

const content = `
\`\`\`javascript
const greeting = "Hello World"
console.log(greeting)
\`\`\`
`

const options = {
  plugins: [
    highlight({
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      }
    })
  ]
}

export default function App() {
  return <Comark options={options}>{content}</Comark>
}
```

## Features

### 1. Dual-Theme Support

Highlight code with different themes for light and dark modes:

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

const result = await parse(content, {
  plugins: [
    highlight({
      themes: {
        light: 'material-theme-lighter',
        dark: 'material-theme-palenight'
      }
    })
  ]
})
```

**Supported themes:**
- `github-light` / `github-dark`
- `material-theme-lighter` / `material-theme-palenight` (default)
- `nord`
- `one-dark-pro`
- `dracula`
- `monokai`
- And [many more](https://shiki.style/themes)

### 2. Language Detection

Automatically detects and highlights 180+ languages:

````markdown
```javascript
const x = 42
```

```typescript
const x: number = 42
```

```python
x = 42
```

```rust
let x: i32 = 42;
```
````

### 3. Line Highlighting

Highlight specific lines using `{line-numbers}` syntax:

````markdown
```javascript {1-3,5}
function example() {
  const a = 1  // highlighted
  const b = 2  // highlighted
  const c = 3  // highlighted
  return a + b + c  // highlighted
}
```
````

**Output:**
Lines 1-3 and 5 will have the `highlight` class applied.

### 4. Filename Metadata

Display filenames above code blocks:

````markdown
```javascript [server.js]
const express = require('express')
const app = express()
```
````

### 5. On-Demand Language Loading

Languages are loaded on-demand for better performance:

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

// Languages loaded only when needed
const result = await parse(content, {
  plugins: [highlight()]
})

// Or preload specific languages
const result = await parse(content, {
  plugins: [
    highlight({
      languages: ['javascript', 'typescript', 'python']
    })
  ]
})
```

### 6. Pre Styles

Add background and foreground colors to `<pre>` elements:

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

const result = await parse(content, {
  plugins: [
    highlight({
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      },
      preStyles: true  // Adds background/foreground colors
    })
  ]
})
```

## Configuration Options

```typescript
interface HighlightOptions {
  // Theme configuration
  themes?: {
    light?: string   // Light theme name
    dark?: string    // Dark theme name
    [key: string]: string  // Additional custom themes
  }

  // Languages to preload (optional, loaded on-demand by default)
  languages?: string[]

  // Add inline styles to <pre> elements
  preStyles?: boolean
}
```

### Default Configuration

```typescript
{
  themes: {
    light: 'material-theme-lighter',
    dark: 'material-theme-palenight'
  },
  preStyles: false
}
```

## Examples

### GitHub Theme

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

const result = await parse(content, {
  plugins: [
    highlight({
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      }
    })
  ]
})
```

### Single Theme

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

const result = await parse(content, {
  plugins: [
    highlight({
      themes: {
        light: 'nord',
        dark: 'nord'
      }
    })
  ]
})
```

### With Pre Styles

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

const result = await parse(content, {
  plugins: [
    highlight({
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      },
      preStyles: true
    })
  ]
})
```

### Preload Languages

```typescript
import { parse } from 'comark'
import highlight from 'comark/plugins/highlight'

const result = await parse(content, {
  plugins: [
    highlight({
      languages: ['javascript', 'typescript', 'python', 'rust'],
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      }
    })
  ]
})
```

### Documentation Site

```vue
<script setup>
import { defineComarkComponent } from 'comark/vue'
import highlight from 'comark/plugins/highlight'

const DocsContent = defineComarkComponent({
  name: 'DocsContent',
  plugins: [
    highlight({
      themes: {
        light: 'github-light',
        dark: 'github-dark'
      },
      preStyles: true
    })
  ]
})
</script>

<template>
  <Suspense>
    <DocsContent>{{ content }}</DocsContent>
  </Suspense>
</template>
```

### Blog with Code Examples

```tsx
import { defineComarkComponent } from 'comark/react'
import highlight from 'comark/plugins/highlight'

export const BlogPost = defineComarkComponent({
  name: 'BlogPost',
  plugins: [
    highlight({
      themes: {
        light: 'material-theme-lighter',
        dark: 'dracula'
      }
    })
  ]
})

// Usage
export default function Post({ content }) {
  return (
    <article className="prose">
      <BlogPost>{content}</BlogPost>
    </article>
  )
}
```

## Styling

### CSS Variables

Shiki generates inline styles, but you can override with CSS:

```css
/* Override code block styles */
pre.shiki {
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
}

/* Line highlighting */
.line.highlight {
  background-color: rgba(255, 255, 0, 0.1);
  display: block;
  margin: 0 -1rem;
  padding: 0 1rem;
}
```

### Dark Mode Integration

For frameworks with dark mode support:

```css
/* Tailwind CSS example */
@media (prefers-color-scheme: dark) {
  pre.shiki {
    /* Dark theme styles automatically applied by Shiki */
  }
}
```

## Performance

The highlight plugin is optimized for performance:

1. **Singleton Highlighter**: Creates one Shiki instance shared across all code blocks
2. **On-Demand Loading**: Languages loaded only when needed
3. **Theme Caching**: Themes loaded once and reused
4. **Async Processing**: Highlighting happens during parse, not render
5. **Graceful Fallbacks**: Falls back to plain text if language not supported

```

## Supported Languages

Shiki supports 180+ languages including:

**Web:**
- JavaScript, TypeScript, JSX, TSX
- HTML, CSS, SCSS, SASS, Less
- Vue, Svelte, Astro

**Backend:**
- Python, Ruby, PHP, Go
- Java, Kotlin, Scala
- Rust, C, C++, C#

**Data:**
- JSON, YAML, TOML, XML
- SQL, GraphQL

**Shell:**
- Bash, Shell, PowerShell, Batch

**Config:**
- Dockerfile, Nginx, Apache
- Git Config, .env

[View full language list](https://shiki.style/languages)

## Troubleshooting

### "Shiki is not installed" Error

Make sure Shiki is installed:

```bash
npm install shiki
```

## See Also

- [Markdown Syntax](/syntax/markdown) - Code block syntax reference
- [Parse API](/api/parse) - Parsing options
- [Vue Rendering](/rendering/vue) - Using with Vue
- [React Rendering](/rendering/react) - Using with React
- [Shiki Documentation](https://shiki.style/) - Shiki features and themes
