---
title: Mathematics
description: Plugin for rendering LaTeX math formulas in Comark using KaTeX.
navigation:
  icon: i-lucide-calculator
---

# Mathematics

The `@comark/math` plugin enables rendering of LaTeX math formulas in your markdown content using [KaTeX](https://katex.org/). It supports both inline and display math expressions.

## Installation

::code-group

```bash [npm]
npm install @comark/math
```

```bash [pnpm]
pnpm add @comark/math
```

```bash [yarn]
yarn add @comark/math
```

::


## Basic Usage

### With Vue

```vue
<script setup>
import { Comark } from 'comark/vue'
import mathPlugin from '@comark/math'
import { Math } from '@comark/math/vue'

const markdown = `
The equation $E = mc^2$ is famous.

$$
x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}
$$
`
</script>

<template>
  <Suspense>
    <Comark
      :markdown="markdown"
      :components="{ math: Math }"
      :options="{ plugins: [mathPlugin()] }"
    />
  </Suspense>
</template>
```

### With React

```tsx
import { Comark } from 'comark/react'
import mathPlugin from '@comark/math'
import { Math } from '@comark/math/react'

const markdown = `
The equation $E = mc^2$ is famous.

$$
x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}
$$
`

function App() {
  return (
    <Comark
      markdown={markdown}
      components={{ math: Math }}
      options={{ plugins: [mathPlugin()] }}
    />
  )
}
```

### With Parse API

```typescript
import { parse } from 'comark'
import mathPlugin from '@comark/math'

const result = await parse('Inline $x^2$ and display $$E = mc^2$$', {
  plugins: [mathPlugin()]
})
```

## Syntax

### Inline Math

Use single `$` delimiters for inline math expressions:

```mdc
The formula $E = mc^2$ relates energy and mass.

The Pythagorean theorem: $a^2 + b^2 = c^2$
```

### Display Math

Use double `$$` delimiters for display (block) math:

```mdc
The quadratic formula:

$$
x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
$$
```

### Math Code Blocks

You can also use code blocks with the `math` language:

````mdc
```math
x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
```
````

## LaTeX Examples

### Basic Operations

```mdc
Addition: $x + y$
Subtraction: $x - y$
Multiplication: $x \times y$ or $x \cdot y$
Division: $x \div y$ or $\frac{x}{y}$
```

### Fractions

```mdc
Simple: $\frac{a}{b}$
Nested: $\frac{\frac{a}{b}}{c}$
```

### Exponents and Subscripts

```mdc
Superscript: $x^2$ or $x^{n+1}$
Subscript: $x_i$ or $x_{i,j}$
Combined: $x_1^2 + x_2^2$
```

### Roots

```mdc
Square root: $\sqrt{x}$
Nth root: $\sqrt[3]{x}$
Complex: $\sqrt{x^2 + y^2}$
```

### Greek Letters

```mdc
Lowercase: $\alpha, \beta, \gamma, \delta, \epsilon$
Uppercase: $\Gamma, \Delta, \Theta, \Lambda, \Sigma$
```

### Integrals

```mdc
Indefinite: $\int f(x) dx$
Definite: $\int_0^\infty e^{-x^2} dx$
Multiple: $\iint f(x,y) dx dy$
```

### Summations and Products

```mdc
Summation: $\sum_{i=1}^{n} i$
Product: $\prod_{i=1}^{n} i$
```

### Limits

```mdc
$\lim_{x \to \infty} f(x)$
$\lim_{x \to 0^+} \frac{1}{x}$
```

### Matrices

```mdc
$$
\begin{pmatrix}
a & b \\
c & d
\end{pmatrix}
$$

$$
\begin{bmatrix}
1 & 2 & 3 \\
4 & 5 & 6
\end{bmatrix}
$$
```

### Systems of Equations

```mdc
$$
\begin{cases}
x + y = 5 \\
2x - y = 1
\end{cases}
$$
```

### Calculus

```mdc
Derivative: $\frac{df}{dx}$ or $f'(x)$
Partial: $\frac{\partial f}{\partial x}$
```

### Trigonometry

```mdc
$\sin(x), \cos(x), \tan(x)$
$\arcsin(x), \arccos(x), \arctan(x)$
```

### Logic and Sets

```mdc
$x \in A$ (element of)
$A \subset B$ (subset)
$A \cup B$ (union)
$A \cap B$ (intersection)
$\forall x$ (for all)
$\exists x$ (there exists)
```

## Configuration

### Component Props

Both Vue and React `Math` components accept these props:

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `content` | `string` | required | The LaTeX math expression |
| `class` | `string` | `''` | CSS classes (determines inline vs display) |

The component automatically renders in display mode when the class contains "block", otherwise inline mode.

## Edge Cases

### Dollar Signs in Text

The plugin intelligently avoids matching dollar signs that aren't math:

```mdc
Prices like $100 or $200 won't be parsed as math.
```

The parser requires:
- At least one character between `$` delimiters
- Content that doesn't start with a digit
- Proper closing delimiter

### Math in Different Contexts

Math works everywhere in markdown:

```mdc
# Formula $E = mc^2$ in heading

- Item with $x^2$
- Another with $y^2$

> Quote with $\alpha + \beta$
```

### Escaping Backslashes

In JavaScript strings, escape backslashes:

```javascript
const latex = '\\frac{a}{b}' // Correct
const wrong = '\frac{a}{b}'  // Wrong - \f is escape sequence
```

In template literals, use double backslashes:

```javascript
const latex = `\\frac{a}{b}` // Correct
```

## Performance

The plugin is optimized for performance:

1. **Parse-time tokenization**: Math is identified during markdown parsing
2. **Lazy rendering**: KaTeX only renders when components mount
3. **No regex scanning at render time**: All pattern matching happens once
4. **Minimal overhead**: LaTeX stored as plain text in AST until render

## Examples

See the [Math example](/examples#math-formulas) for a complete working implementation.

## Resources

- [KaTeX Documentation](https://katex.org/docs/supported.html)
- [KaTeX Function Support](https://katex.org/docs/support_table.html)
- [LaTeX Math Symbols](http://www.math.union.edu/~dpvc/jsmath/symbols/welcome.html)

## Related

- [Parse API](/api/parse) - Main parsing API
- [Vue Rendering](/rendering/vue) - Using with Vue
- [React Rendering](/rendering/react) - Using with React
