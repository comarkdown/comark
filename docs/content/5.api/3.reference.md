---
title: API Reference
description: Quick reference for all Comark exports and APIs.
---

## Core Parser (`comark`)

### Functions

#### `parse(source, options?)`

Synchronous parsing of Comark content.

```typescript
import { parse } from 'comark'

const result = await parse(markdownContent, {
  autoUnwrap: true,  // Remove <p> wrappers from single-paragraph containers
  autoClose: true    // Auto-close incomplete syntax
})

// Returns: ComarkTree
result.nodes        // ComarkNode[] - Parsed AST nodes
result.frontmatter  // Record<string, any> - Frontmatter data
result.meta.toc     // TOC object (from toc plugin)
result.meta.summary // ComarkNode[] (from summary plugin)
```

#### `parse(source, options?)`

Asynchronous parsing with optional syntax highlighting.

```typescript
import { parse } from 'comark'

const result = await parse(markdownContent, {
  highlight: true,
  // Or with options:
  highlight: {
    themes: { light: 'github-light', dark: 'github-dark' },
    languages: ['typescript', 'vue']
  }
})
```

## String Rendering (`comark/string`)

### Functions

#### `renderHTML(tree, options?)`

Convert Comark AST to HTML string, with optional custom component renderers.

```typescript
import { renderHTML } from 'comark/string'

// Simple usage
const html = renderHTML(tree)

// With custom components
const html = renderHTML(tree, {
  components: {
    alert: ([tag, attrs, ...children], { render, data }) => {
      return `<div class="alert alert-${attrs.type}">${render(children)}</div>`
    }
  }
})
```

#### `renderMarkdown(tree)`

Convert Comark AST back to markdown.

```typescript
import { renderMarkdown } from 'comark/string'

const markdown = renderMarkdown(tree)
// "# Hello\n\nWorld"
```

#### `autoCloseMarkdown(source)`

Auto-close incomplete markdown/Comark.

```typescript
import { autoCloseMarkdown } from 'comark'

autoCloseMarkdown('**bold')        // "**bold**"
autoCloseMarkdown('::alert\nText') // "::alert\nText\n::"
```

---

## Types

### `ComarkTree`

The main return type for all parse functions.

```typescript
interface ComarkTree {
  nodes: ComarkNode[]           // Parsed AST nodes
  frontmatter: Record<string, any>  // Frontmatter data
  meta: {
    toc?: any                   // Table of contents (from toc plugin)
    summary?: ComarkNode[]      // Summary content (from summary plugin)
    [key: string]: any          // Other plugin metadata
  }
}
```

### `ParseOptions`

```typescript
interface ParseOptions {
  autoUnwrap?: boolean           // Remove unnecessary <p> wrappers (default: true)
  autoClose?: boolean            // Auto-close incomplete syntax (default: true)
  highlight?: boolean | ShikiOptions  // Enable syntax highlighting
}
```

### `ShikiOptions`

```typescript
interface ShikiOptions {
  themes?: Record<string, string>    // Theme configuration
  languages?: string[]               // Languages to preload
}
```

### `RenderHTMLOptions`

```typescript
interface RenderHTMLOptions {
  components?: Record<string, ComponentRenderFn>
  data?: Record<string, any>
}
```

### `ComponentRenderFn`

```typescript
type ComponentRenderFn = (
  element: ComarkElement,
  ctx: RenderHTMLContext
) => string
```

### `RenderHTMLContext`

```typescript
interface RenderHTMLContext {
  render: (children: ComarkNode[]) => string
  data?: Record<string, any>
}
```


### `ComarkNode`

```typescript
type ComarkNode =
  | string  // Text node
  | [tag: string, props?: Record<string, any>, ...children: ComarkNode[]]
```

### `TOC`

```typescript
interface TOC {
  title?: string
  depth: number
  searchDepth: number
  links: TOCLink[]
}

interface TOCLink {
  id: string
  text: string
  depth: number
  children?: TOCLink[]
}
```

---

## Quick Import Reference

```typescript
// Core parsing
import { parse, parse, autoCloseMarkdown } from 'comark'

// String rendering (HTML & Markdown)
import { renderHTML, renderMarkdown } from 'comark/string'
import type { RenderHTMLOptions, ComponentRenderFn, RenderHTMLContext } from 'comark/string'

// Vue components
import { Comark } from 'comark/vue'

// React components
import { Comark } from 'comark/react'

// Types
import type {
  ComarkTree,
  ComarkNode,
  ParseOptions,
  ShikiOptions
} from 'comark'
```

---

## See Also

- [Parse API](/api/parse) - Detailed parsing documentation
- [Auto-Close API](/api/auto-close) - Handling incomplete syntax
- [HTML Rendering](/rendering/html) - HTML string rendering guide
- [Vue Renderer](/rendering/vue) - Vue rendering guide
- [React Renderer](/rendering/react) - React rendering guide
- [Comark AST](/syntax/comark-ast) - AST format reference
