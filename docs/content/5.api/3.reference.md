---
title: API Reference
description: Quick reference for all Comark exports and APIs.
---

## Core Parser (`comark`)

### Functions

#### `parse(source, options?)`

Synchronous parsing of Comark content.

```typescript
import { parse } from 'comark'

const result = parse(markdownContent, {
  autoUnwrap: true,  // Remove <p> wrappers from single-paragraph containers
  autoClose: true    // Auto-close incomplete syntax
})

// Returns: ParseResult
result.body   // ComarkTree - Parsed AST
result.data   // any - Frontmatter data
result.toc    // TOC object
result.excerpt // Optional excerpt
```

#### `parseAsync(source, options?)`

Asynchronous parsing with optional syntax highlighting.

```typescript
import { parseAsync } from 'comark'

const result = await parseAsync(markdownContent, {
  highlight: true,
  // Or with options:
  highlight: {
    themes: { light: 'github-light', dark: 'github-dark' },
    languages: ['typescript', 'vue']
  }
})
```

#### `renderHTML(tree)`

Convert Comark AST to HTML string.

```typescript
import { renderHTML } from 'comark'

const html = renderHTML(result.body)
// "<h1 id=\"hello\">Hello</h1><p>World</p>"
```

#### `renderMarkdown(tree)`

Convert Comark AST back to markdown.

```typescript
import { renderMarkdown } from 'comark'

const markdown = renderMarkdown(result.body)
// "# Hello\n\nWorld"
```

#### `autoCloseMarkdown(source)`

Auto-close incomplete markdown/Comark.

```typescript
import { autoCloseMarkdown } from 'comark'

autoCloseMarkdown('**bold')        // "**bold**"
autoCloseMarkdown('::alert\nText') // "::alert\nText\n::"
```

---

## Types

### `ParseResult`

```typescript
interface ParseResult {
  body: ComarkTree        // Parsed AST
  excerpt?: ComarkTree    // Content before <!-- more -->
  data: any                 // Frontmatter data
  toc?: TOC                 // Table of contents
}
```

### `ParseOptions`

```typescript
interface ParseOptions {
  autoUnwrap?: boolean           // Remove unnecessary <p> wrappers (default: true)
  autoClose?: boolean            // Auto-close incomplete syntax (default: true)
  highlight?: boolean | ShikiOptions  // Enable syntax highlighting
}
```

### `ShikiOptions`

```typescript
interface ShikiOptions {
  themes?: Record<string, string>    // Theme configuration
  languages?: string[]               // Languages to preload
}
```

### `ComarkTree`

```typescript
interface ComarkTree {
  type: 'comark'
  value: ComarkNode[]
}
```

### `ComarkNode`

```typescript
type ComarkNode =
  | string  // Text node
  | [tag: string, props?: Record<string, any>, ...children: ComarkNode[]]
```

### `TOC`

```typescript
interface TOC {
  title?: string
  depth: number
  searchDepth: number
  links: TOCLink[]
}

interface TOCLink {
  id: string
  text: string
  depth: number
  children?: TOCLink[]
}
```

---

## Quick Import Reference

```typescript
// Core parsing
import { parse, parseAsync, renderHTML, renderMarkdown, autoCloseMarkdown } from 'comark'

// Vue components
import { Comark } from 'comark/vue'

// React components
import { Comark } from 'comark/react'

// Types
import type {
  ParseResult,
  ParseOptions,
  ComarkTree,
  ComarkNode,
  ShikiOptions
} from 'comark'
```

---

## See Also

- [Parse API](/api/parse) - Detailed parsing documentation
- [Auto-Close API](/api/auto-close) - Handling incomplete syntax
- [Vue Renderer](/rendering/vue) - Vue rendering guide
- [React Renderer](/rendering/react) - React rendering guide
- [Comark AST](/syntax/comark-ast) - AST format reference
